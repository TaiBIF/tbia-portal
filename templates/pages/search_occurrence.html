{% extends 'base.html' %} 
{% load static %} 

{% block head %}

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
  integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
  crossorigin=""/>
<!--
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.css" integrity="sha512-gc3xjCmIy673V6MyOAZhIW93xhM9ei1I+gLbmFjUHIjocENRsLX/QUE1htk5q1XV2D/iie/VQ8DXI6Vu8bexvQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
-->
<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
  integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
  crossorigin=""></script>
<!--
<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.js" integrity="sha512-ozq8xQKq6urvuU6jNgkfqAmT7jKN2XumbrX1JiB3TnF7tI48DPI4Gy1GXKD/V3EExgAs1V+pRO7vwtS1LHg0Gw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
-->
<link rel="stylesheet" href="https://code.jquery.com/ui/1.13.0/themes/base/jquery-ui.css">
<script src="https://code.jquery.com/ui/1.13.0/jquery-ui.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.js" integrity="sha512-ozq8xQKq6urvuU6jNgkfqAmT7jKN2XumbrX1JiB3TnF7tI48DPI4Gy1GXKD/V3EExgAs1V+pRO7vwtS1LHg0Gw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.css" integrity="sha512-gc3xjCmIy673V6MyOAZhIW93xhM9ei1I+gLbmFjUHIjocENRsLX/QUE1htk5q1XV2D/iie/VQ8DXI6Vu8bexvQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
{% comment %} <script src='https://unpkg.com/@turf/turf@6/turf.min.js'></script> {% endcomment %}
{% comment %} <script src="https://kit.fontawesome.com/b8e586964f.js" crossorigin="anonymous"></script> {% endcomment %}
<link href="/static/fontawesome-free-6.2.1/css/brands.min.css" rel="stylesheet" />
<link href="/static/fontawesome-free-6.2.1/css/solid.min.css" rel="stylesheet" />
<link href="/static/fontawesome-free-6.2.1/css/v5-font-face.min.css" rel="stylesheet" />
<script src="/static/fontawesome-free-6.2.1/js/fontawesome.min.js" data-auto-add-css="false"></script>
<script src="/static/fontawesome-free-6.2.1/js/brands.min.js" data-auto-add-css="false"></script>
<script src="/static/fontawesome-free-6.2.1/js/solid.min.js" data-auto-add-css="false"></script>
{% endblock head %}

{% block style %}
<link rel="stylesheet" type="text/css" href="{% static 'css/search_occurrence.css' %}" />
{% endblock style %}

{% block title %}物種出現紀錄查詢｜{% endblock %}

{% block body %}
{% csrf_token %}
<div class="path">
  <div class="main_1240">
    <a href="{% url 'index' %}" class="home"></a> <span>></span>
    <p>條件搜尋</p>
    <span>></span>
    <p>物種出現紀錄查詢</p>
  </div>
</div>

<div class="nbn_title">
  <h2>物種出現紀錄查詢</h2>
</div>

<div class="container_area">
  <div class="main_1240">
    <div class="search_condition_are">
      <form id="searchForm">
        <input type="hidden" name="record_type" value="occ">
        <input type="hidden" name="geojson_id" value="">
        <div class="secboxtop2">
          <div class="leftbox">
            <div class="two_input">
              <div class="input_item">
                <input type="text" name="name" placeholder="中文名/學名/中文別名" />
              </div>
            </div>
            <div class="two_input">
              <div class="input_item">
                <select name="rightsHolder" id="rightsHolder" required multiple size="1">
                  {% for i in holder_list %}
                  <option value="{{ i }}">{{ i }}</option>
                  {% endfor %}
                </select>
              </div>
              <div class="input_item">
                <input name="taxonID" type="text" placeholder="TaiCOL物種編號" />
              </div>            
            </div>
            <div class="two_input">
              <div class="input_item">
                <select name="sensitiveCategory" id="sensitiveCategory" required>
                  <option></option>
                  {% for i in sensitive_list %}
                  <option value="{{ i }}">{{ i }}</option>
                  {% endfor %}
                </select>
              </div>
              <div class="input_item">
                <select name="taxonRank" id="taxonRank" required>
                  <option value=""></option>
                  {% for i in rank_list %}
                  <option value="{{ i.1 }}">{{ i.0 }}</option>
                  {% endfor %}
                </select>
              </div>
            </div>
            <div class="two_input">
              <div class="line_cneter">~</div>
              <div class="input_item">
                <input name="start_date" id="start_date" type="text" placeholder="起始日期（YYYY-MM-DD）" />
                <a class="dateicon show_start"></a>
              </div>
              <div class="input_item">
                <input name="end_date" id="end_date" type="text" placeholder="結束日期（YYYY-MM-DD）" value="" />
                <a class="dateicon show_end"></a>
              </div>
            </div>
            <div class="two_input">
              <div class="input_item">
                <input name="locality" type="text" placeholder="出現地" />
              </div>
              <div class="input_item">
                <input name="organismQuantity" type="number" placeholder="數量" min="0" />
              </div>
            </div>
            <div class="two_input">
              <div class="input_item">
                <input name="recordedBy" type="text" placeholder="記錄者" />
              </div>
              <div class="input_item">
                <select name="basisOfRecord" id="basisOfRecord" required>
                  <option value=""></option>
                  {% for i in basis_list %}
                  <option value="{{ i }}">{{ i }}</option>
                  {% endfor %}
                </select>
              </div>
            </div>
            <div class="two_input">
              <div class="input_item">
                <select name="datasetName" id="datasetName" required multiple size="1">
                  {% for i in dataset_list %}
                  <option value="{{ i.id }}">{{ i.name }}</option>
                  {% endfor %}
                </select>
              </div>
              <div class="input_item">
                <input name="resourceContacts" type="text" placeholder="資料集聯絡人" />
              </div>
            </div>
          </div>
          <div class="rightbox">
            <div class="title_area">
              <h3>空間查詢</h3>
              <a href="#" class="qmark"></a>
            </div>
            <div class="btn_area">
              <label class="btnupload">
                <p class="w-110px mapGeo" data-type="map">地圖框選</p>
              </label>
              <label class="btnupload">
                <p class="w-120px circleGeo" data-type="circle">圓中心框選</p>
              </label>
              <label class="btnupload">
                <p class="w-130px popupGeo" data-type="polygon">上傳Polygon</p>
              </label>
              <label class="btnupload">
                <p class="clearGeo">重設</p>  
              </label>
            </div>          
            <div class="map_img">
              <div class="imgbox">
                <div id="map" class="img"></div>
              </div>
            </div>
          </div>
        </div>
        </form>
        <button class="search_btn submitSearch" data-page="1" data-from="search" data-new_click="true">搜尋</button>
    </div>
  </div>
</div>

<!-- 物種出現紀錄欄位選擇 -->
<div class="popbg occ-choice d-none">
	<div class="ovhy choice-ovhy">
		<div class="wbox_center choice-flow">
			<div class="xx choice-xx">
			</div>
			<div class="catetitle">
				<div class="titlebox">欄位選項</div>	
				<button class="selt selectAll">全選</button>
				<button class="selt resetAll">重置</button>
			</div>
			<ul class="catalist">
				<li>
					<input type="checkbox" class="chebox" id="occ-common_name_c">
					<p>中文名</p>
				</li>
				<li>
					<input type="checkbox" class="chebox" id="occ-scientificName">
					<p>學名</p>
				</li>
				<li>
					<input type="checkbox" class="chebox" id="occ-alternative_name_c">
					<p>中文別名</p>
				</li>
				<li>
					<input type="checkbox" class="chebox" id="occ-synonyms">
					<p>同物異名</p>
				</li>
				<li>
					<input type="checkbox" class="chebox" id="occ-taxonRank">
					<p>鑑定層級</p>
				</li>				
				<li>
					<input type="checkbox" class="chebox" id="occ-sensitiveCategory">
					<p>敏感層級</p>
				</li>				
        <li>
					<input type="checkbox" class="chebox" id="occ-rightsHolder">
					<p>來源資料庫</p>
				</li>
				<li>
					<input type="checkbox" class="chebox" id="occ-taxonID">
					<p>TaiCOL物種編號</p>
				</li>
				<li>
					<input type="checkbox" class="chebox" id="occ-eventDate">
					<p>紀錄日期</p>
				</li>
				<li>
					<input type="checkbox" class="chebox" id="occ-locality">
					<p>出現地</p>
				</li>
				<li>
					<input type="checkbox" class="chebox" id="occ-organismQuantity">
					<p>數量</p>
				</li>
				<li>
					<input type="checkbox" class="chebox" id="occ-organismQuantityType">
					<p>數量單位</p>
				</li>
				<li>
					<input type="checkbox" class="chebox" id="occ-recordedBy">
					<p>記錄者</p>
				</li>
				<li>
					<input type="checkbox" class="chebox" id="occ-verbatimLongitude">
					<p>經度</p>
				</li>
				<li>
					<input type="checkbox" class="chebox" id="occ-verbatimLatitude">
					<p>緯度</p>
				</li>
				<li>
					<input type="checkbox" class="chebox" id="occ-verbatimSRS">
					<p>空間參考系統</p>
				</li>
				<li>
					<input type="checkbox" class="chebox" id="occ-verbatimCoordinateSystem">
					<p>座標系統</p>
				</li>
				<li>
					<input type="checkbox" class="chebox" id="occ-coordinateUncertaintyInMeters">
					<p>座標誤差</p>
				</li>
				<li>
					<input type="checkbox" class="chebox" id="occ-dataGeneralizations">
					<p>座標是否有模糊化</p>
				</li>
				<li>
					<input type="checkbox" class="chebox" id="occ-coordinatePrecision">
					<p>座標模糊化程度</p>
				</li>
				<li>
					<input type="checkbox" class="chebox" id="occ-basisOfRecord">
					<p>紀錄類型</p>
				</li>
				<li>				
					<input type="checkbox" class="chebox" id="occ-datasetName">
					<p>資料集名稱</p>
				</li>
				<li>
					<input type="checkbox" class="chebox" id="occ-resourceContacts">
					<p>資料集聯絡人</p>
				</li>
				<li>
					<input type="checkbox" class="chebox" id="occ-license">
					<p>授權狀況</p>
				</li>
			</ul>
			<button class="send_bt sendSelected">確認</button>
		</div>
	</div>
</div>


<!--空間查詢popbox-->
<div class="popbg geojson_popup d-none">
	<div class="ovhy">
		<div class="wbox_center">
			<div class="xx">
			</div>
			<div class="titlegreen">
				空間查詢
			</div>
			<p class="shortxt">
        請以GeoJSON格式貼上欲查詢的Polygon：
			</p>
			<div class="from_area h-100p">
				<div class="txt_area">
					<textarea id="geojson_textarea" class="h-300px"></textarea>
				</div>
        <p class="shortxt note-text">
          *僅支援Polygon（上限2.5 MB）
        </p>
        <p class="shortxt note-text">
          *Polygon會經過dissolve處理
        </p>
				<button class="send geojson_send">確認送出</button>
			</div>
		</div>
	</div>
</div>

<!--圓中心查詢popbox-->
<div class="popbg circle_popup d-none">
	<div class="ovhy">
		<div class="wbox_center mh-380px">
			<div class="xx">
			</div>
			<div class="titlegreen">
				 圓中心框選
			</div>
			<div class="from_area h-100p">
				<div class="txt_area mt-5p">
          <div class="circle-select">
            <p>半徑</p>
            <select name="circle_radius" id="circle_radius" required>
              <option value="1">1KM</option>
              <option value="2">2KM</option>
              <option value="5">5KM</option>
              <option value="10">10KM</option>
              <option value="25">25KM</option>
              <option value="50">50KM</option>
            </select>
          </div>
          <div class="circle-select">
            <p>中心點經度</p>
            <input name="center_lon" type="text">
          </div>
          <div class="circle-select">
            <p>中心點緯度</p>
            <input name="center_lat" type="text">
          </div>
				</div>
				<button class="send circle_send mt-5p">確認送出</button>
			</div>
		</div>
	</div>
</div>
{% endblock body %}

{% block script %}
<script src="{% static 'js/wicket.js' %}"></script>
<script src="{% static 'js/wicket-leaflet.js' %}"></script>
<script src="{% static 'js/search_occurrence.js' %}"></script>
{% endblock script %}